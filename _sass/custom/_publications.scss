/* =====================================================================
   xAI Lab — Scientific bibliography styling
   ===================================================================== */

.bib {
  font-size: $font-size-xs;        
  line-height: 1.45;
  color: $color-text-main;
  max-width: 900px;                /* keeps text readable on wide screens */
}

/* Header: intro text + filter ------------------------------------------------ */

.bib-header {
  /* keep header in the same column as the bibliography */
  max-width: 900px;
  margin: 0 auto $space-lg;        /* center + bottom spacing */

  display: flex;
  justify-content: space-between;  /* text left, filter right within 900px */
  align-items: baseline;
  gap: $space-md;
  font-size: $font-size-xs;
}

.bib-header p {
  margin: 0;
}

.bib-header #filter {
  flex: 0 0 auto;
  width: 220px;                    /* slightly narrower so it feels closer */
  margin: 0;

  font-size: $font-size-sm;
  line-height: 1.4;
  padding: $space-xs $space-md;

  border-radius: $radius-pill;
  border: 1px solid $color-border-soft;
  background: $color-surface;
  color: $color-text-main;

  &:focus {
    outline: 2px solid $color-brand-primary;
    outline-offset: 1px;
  }
}


/* small screens: stack text + filter, filter full width */
@media (max-width: $bp-small) {
  .bib-header {
    flex-direction: column;
    align-items: flex-start;
  }

  .bib-header #filter {
    width: 100%;
  }
}

/* Year headings -------------------------------------------------------------- */

.bib h2 {
  margin-top: $space-xxl;          /* stronger separation between years */
  margin-bottom: $space-sm;
  font-size: $font-size-xl;        /* clearer section title */
  font-weight: $font-weight-semibold;
  color: $color-text-strong;
  letter-spacing: -0.01em;

  border-bottom: 1px solid $color-border-soft;
  padding-bottom: $space-xs;

  /* nice scroll position if you link to #year anchors */
  scroll-margin-top: $space-xl;
}

/* Remove numbering */

.bib .bibliography {
  list-style: none;
  margin: 0;
  padding: 0;
}

/* Spacing & base color for entries */

.bib .bibliography li {
  margin-bottom: $space-sm;
  color: $color-text-main;
}

/* Emphasise title/venue with italics but keep color consistent */

.bib .bibliography li i {
  font-style: italic;
  color: $color-text-main;
}

/* ---------------------------------------------------------------------
   Publication cards
   --------------------------------------------------------------------- */

.pub-item {
  margin: $space-lg 0;
  padding: $space-md $space-lg;
  border-radius: $radius-lg;
  background: $color-surface-alt;  /* light panel/background color */
  box-shadow: $shadow-card;        /* subtle elevation */
}

.pub-item__meta {
  margin-top: $space-xs;
  font-size: $font-size-xs;
  color: $color-text-muted;
}

/* ---------------------------------------------------------------------
   Links / badges (PDF, code, DOI, etc.)
   --------------------------------------------------------------------- */

.bib .pub-links {
  display: inline-flex;
  flex-wrap: nowrap;
  gap: $space-xxs;
  margin-top: 0;              /* prevent newline spacing */
  margin-left: $space-xs;     /* space after publication text */
  vertical-align: baseline;
}

.bib .pub-links a {
  display: inline-flex;
  align-items: center;
  padding: $space-xxs $space-sm;
  border-radius: $radius-pill;
  border: 1px solid $color-border-soft;
  font-size: $font-size-xxs;
  text-transform: uppercase;
  letter-spacing: $letter-spacing-wide;
  color: $color-text-muted;
  opacity: 0.9;
  text-decoration: none;
}

.bib .pub-links a:hover {
  border-color: $color-brand-primary;
  color: $color-brand-primary;
  opacity: 1;
}

.bib .pub-links i {
  font-size: 0.8em;
  margin-right: $space-xxs;
}

/* ---------------------------------------------------------------------
   Collapsible BibTeX blocks
   --------------------------------------------------------------------- */

.pub-bibtex {
  margin-top: $space-xxs;
  margin-bottom: $space-md;
}

/* Summary row (triangle + “BibTeX” label + copy icon) */
.pub-bibtex summary {
  display: flex;
  align-items: center;
  gap: $space-xxs;   /* tiny gap between “BibTeX” and icon */
}

/* triangle + "BibTeX" label */
.pub-bibtex__summary {
  list-style: none;
  display: inline-flex;
  align-items: center;
  gap: $space-xxs;
  font-family: $font-family-monospace;
  font-size: $font-size-xs;
  color: $color-text-muted;
  cursor: pointer;
  text-decoration: none;      /* reset */
}

/* only underline the label text, not the icon */
.pub-bibtex__summary .label {
  text-decoration: none;
}

.pub-bibtex__summary:hover .label {
  text-decoration: underline;
}

/* hide default marker */
.pub-bibtex__summary::-webkit-details-marker {
  display: none;
}

/* custom triangle before the text */
.pub-bibtex__summary::before {
  content: "▸";                    /* sideways triangle */
  display: inline-block;
  font-size: $font-size-lg;
  line-height: 1;
}

/* when <details> is open, show down triangle */
.pub-bibtex[open] .pub-bibtex__summary::before {
  content: "▾";
}

/* Icon-only copy button */
.pub-bibtex__copy {
  display: inline-flex;
  align-items: center;
  justify-content: center;

  background: none;
  border: none;
  padding: 0;
  margin: 0;

  color: $color-text-muted;
  cursor: pointer;

  /* kill default focus box completely */
  outline: none;
  box-shadow: none;
}

/* Default icon state */
.pub-bibtex__copy i {
  transition: color 0.15s ease, transform 0.15s ease;
}

/* When copied, animate icon subtly */
.pub-bibtex__copy.copied i {
  color: $color-brand-primary;
  transform: scale(1.15);
}

/* BibTeX code block */

details.pub-bibtex pre {
  margin: $space-xxs 0 0;
  padding: $space-xs $space-sm;
  background: $color-surface-soft;
  border-left: 3px solid $color-border-soft;
  border-radius: $radius-sm;
  font-size: $font-size-xxs;
  line-height: 1.3;
  overflow-x: auto;
}

/* Force monospace inside BibTeX block */

details.pub-bibtex pre,
details.pub-bibtex pre code {
  font-family: $font-family-monospace !important;
  font-variant-ligatures: none;
  letter-spacing: 0;
}
